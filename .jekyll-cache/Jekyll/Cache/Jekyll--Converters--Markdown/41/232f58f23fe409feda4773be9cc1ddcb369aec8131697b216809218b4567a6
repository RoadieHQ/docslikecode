I"+<h1 id="use-case-part-i-balsamiq">Use Case Part I: Balsamiq</h1>

<p>Leon Barnard, Designer and Writer (and Developer-in-training) at <a href="https://balsamiq.com/">Balsamiq</a>, describes how the second version of the Balsamiq Docs static site went beyond purely functional to do things the team didn’t think Markdown and static sites could do.</p>

<p>In this three-part series, Leon describes some great solutions to problems that many technical sites have faced.</p>

<p>The three parts cover documenting multiple product versions, <a href="https://docslikecode.com/articles/balsamiq-case-study-part-2/">adding play and pause to animated GIFs</a>, and providing flexibility and expansion options in lists of linked pages.</p>

<h2 id="background">Background</h2>

<p>A year and a half ago <a href="https://blog.balsamiq.com/new-documentation-site/">we ditched our flaky content management system</a> and converted our documentation site over to a “docs like code” system using <a href="https://gohugo.io/">Hugo</a>, <a href="https://gulpjs.com/">Gulp</a>, and <a href="https://github.com/">GitHub</a>, with content written in Markdown. It was a long process and we were happy just to see it up and running.</p>

<p>After the dust settled, we started imagining what we wanted for the next version, and realized that the system we had built had limitations that we would have to overcome. This is a story of three challenges and how we solved them.</p>

<p><strong><em>Note:</em></strong> <em>The code in this article is specific to <a href="https://gohugo.io/">Hugo</a>, the static site generator we use, but should be adaptable to other static site generators.</em></p>

<h2 id="challenge-1-documenting-multiple-product-versions">Challenge #1: Documenting multiple product versions</h2>

<p>Our product, <a href="https://balsamiq.com/">Balsamiq Mockups</a>, comes in multiple “flavors,” as we often call them. There are two versions of the core product (the wireframe editor) that are sold as: a stand-alone desktop version, a hosted web version (“myBalsamiq”), and plugins for Google Drive and Atlassian Confluence and JIRA.</p>

<p><img src="https://www.docslikecode.com/images/balsamiq/select-product.png" alt="Select product" /></p>

<p>That’s seven different products that we sell, catered to different types of users. This is great for our customers, but a challenge for our docs.</p>

<p>The majority of our documentation is how to use one of the two core wireframe editors. Very little has to do with platform-specific features. So, seven products that we sell, but only two main sets of documentation.</p>

<p>For historical reasons, most of the common documentation is in the Desktop version docs. If you used our product on a different platform, you had to know to go to the Desktop docs.</p>

<p>This is what the content folder in our GitHub repo looked like, which meant that a lot of customers had this experience:</p>

<p><img src="https://www.docslikecode.com/images/balsamiq/structure2.png" alt="Concept confusion" /></p>

<p>For the next update to our docs, we decided that we needed to finally address this issue. We wanted a complete set of docs for each product version and platform.</p>

<p><img src="https://www.docslikecode.com/images/balsamiq/structure3.png" alt="Concept combos" /></p>

<p>But, of course, we didn’t want to maintain seven copies of each article. We wanted to be able to write the docs once and have them show up across multiple versions.</p>

<p>A simple solution, I suppose, would have been to switch from Markdown to a file format that supports including content from one file in another (like <a href="http://docutils.sourceforge.net/rst.html">reStructuredText</a> or <a href="http://asciidoc.org/">AsciiDoc</a>). <strong>But, I’m stubborn</strong> (and Hugo doesn’t support them well). I like how simple Markdown is and I wanted to see if we could achieve what we wanted without abandoning it.</p>

<p>I enlisted the help of our resident <a href="https://golang.org/">Go</a> expert, <a href="https://balsamiq.com/company/#luis">Luis</a>, and he wrote some code to do just what we wanted. This code inside one of the Hugo templates allowed us to put help files in two hidden folders (called “_v2” and “_v3”) that would get injected into files across multiple documentation folders each time the site was generated. The end result was that users could now find the information where they expected to find it.</p>

<p><img src="https://www.docslikecode.com/images/balsamiq/structure5.png" alt="Content insertions" /></p>

<p>Instead of changing file formats, we leveraged the flexibility of Hugo to use the meta data (front matter) from the Markdown file as a trigger to tell Hugo to insert content from one file to another.</p>

<p>The code looks like this:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{{</span> <span class="k">if</span> <span class="o">.</span><span class="n">Params</span><span class="o">.</span><span class="n">include</span> <span class="p">}}</span>
 <span class="p">{{</span> <span class="err">$</span><span class="n">include</span> <span class="o">:=</span> <span class="o">.</span><span class="n">Params</span><span class="o">.</span><span class="n">include</span> <span class="p">}}</span>
 <span class="p">{{</span> <span class="k">if</span> <span class="n">eq</span> <span class="o">.</span><span class="n">Params</span><span class="o">.</span><span class="n">editorversion</span> <span class="m">3</span> <span class="p">}}</span>
   <span class="p">{{</span> <span class="k">range</span> <span class="n">where</span> <span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Pages</span> <span class="s">"Params.menu"</span> <span class="s">"menub3editor"</span> <span class="p">}}</span>
     <span class="p">{{</span> <span class="err">$</span><span class="n">file</span> <span class="o">:=</span> <span class="o">.</span><span class="n">File</span><span class="o">.</span><span class="n">BaseFileName</span> <span class="p">}}</span>
     <span class="p">{{</span> <span class="k">if</span> <span class="n">eq</span> <span class="err">$</span><span class="n">file</span> <span class="err">$</span><span class="n">include</span> <span class="p">}}</span>
       <span class="p">{{</span> <span class="o">.</span><span class="n">Content</span> <span class="p">}}</span>
     <span class="p">{{</span> <span class="n">end</span> <span class="p">}}</span>
   <span class="p">{{</span> <span class="n">end</span> <span class="p">}}</span>
 <span class="p">{{</span> <span class="k">else</span> <span class="k">if</span> <span class="n">eq</span> <span class="o">.</span><span class="n">Params</span><span class="o">.</span><span class="n">editorversion</span> <span class="m">2</span> <span class="p">}}</span>
   <span class="p">{{</span> <span class="k">range</span> <span class="n">where</span> <span class="o">.</span><span class="n">Site</span><span class="o">.</span><span class="n">Pages</span> <span class="s">"Params.menu"</span> <span class="s">"menub2editor"</span> <span class="p">}}</span>
     <span class="p">{{</span> <span class="err">$</span><span class="n">file</span> <span class="o">:=</span> <span class="o">.</span><span class="n">File</span><span class="o">.</span><span class="n">BaseFileName</span> <span class="p">}}</span>
     <span class="p">{{</span> <span class="k">if</span> <span class="n">eq</span> <span class="err">$</span><span class="n">file</span> <span class="err">$</span><span class="n">include</span> <span class="p">}}</span>
       <span class="p">{{</span> <span class="o">.</span><span class="n">Content</span> <span class="p">}}</span>
     <span class="p">{{</span> <span class="n">end</span> <span class="p">}}</span>
   <span class="p">{{</span> <span class="n">end</span> <span class="p">}}</span>
 <span class="p">{{</span> <span class="k">else</span> <span class="p">}}</span>
   <span class="p">{{</span> <span class="n">end</span> <span class="p">}}</span>
<span class="p">{{</span> <span class="k">else</span> <span class="p">}}</span>
 <span class="p">{{</span> <span class="o">.</span><span class="n">Content</span> <span class="p">}}</span>
<span class="p">{{</span> <span class="n">end</span> <span class="p">}}</span>
</code></pre></div></div>

<p>Hugo looks for two pieces of front matter. The first is the presence of a parameter called <code class="language-plaintext highlighter-rouge">include</code>. If that exists, it looks to see which version of the editor to use. Then it copies the content from <em>the file with the same name</em> from the core documentation folder (“_v2” or “_v3”) specified in the editor version parameter.</p>

<p><img src="https://www.docslikecode.com/images/balsamiq/structure6.png" alt="Mix and match" /></p>

<p>If the <code class="language-plaintext highlighter-rouge">include</code> parameter isn’t present, Hugo just uses the Markdown content in the file without copying content from elsewhere. This allows us to mix and match docs that are unique to one product with docs that share functionality with multiple products.</p>

<p>It took some effort to get it set up, but now we don’t even think about it. It’s really easy for the content writers, and we’ll be able to extend it when we add yet more versions in the future (we already are, in fact).</p>

<!-- Begin MailChimp Signup Form -->
<link href="//cdn-images.mailchimp.com/embedcode/slim-10_7.css" rel="stylesheet" type="text/css" />

<style type="text/css">
/* 	#mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; }
	Add your own MailChimp form style overrides in your site stylesheet or in this style block.
	   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>

<blockquote>
<div id="mc_embed_signup">
<form action="//justwriteclick.us1.list-manage.com/subscribe/post?u=3828f8d87d82289b96ff8fd19&amp;id=cc1d483d59" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate="">
    <div id="mc_embed_signup_scroll">
			<i class="fa fa-envelope-square"></i>
	<label for="mce-EMAIL">Enter your email for free lessons plus a review checklist in a neat PDF file.</label>

	<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required="" />
    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_3828f8d87d82289b96ff8fd19_cc1d483d59" tabindex="-1" value="" /></div>
    <div class="clear"><input type="submit" value="Join now" name="subscribe" id="mc-embedded-subscribe" class="btn btn--inverse" /></div>
    </div>
</form>
</div>
</blockquote>
<!--End mc_embed_signup-->

:ET